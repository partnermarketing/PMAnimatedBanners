!function t(e,a,n){function i(o,u){if(!a[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[o]={exports:{}};e[o][0].call(d.exports,function(t){var a=e[o][1][t];return i(a?a:t)},d,d.exports,t,e,a,n)}return a[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=t("./loader"),r=n(i);new r["default"]},{"./loader":3}],2:[function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=function(){function t(e,a){var i=this;n(this,t),e=Object.assign(this._defaultData,e),Object.assign(this,{shape:a,data:e}),this.calculate().then(function(){return i.render()})}return i(t,[{key:"calculate",value:function(){var t=this;return new Promise(function(e){t.data.image?t.calculateSize().then(function(){return t.calculatePos().then(e)}):e()})}},{key:"render",value:function(){if(this.data.image){var t=this.shape.addChild(new createjs.Bitmap(this.imageEl));t.setTransform(this.data.pos.x,this.data.pos.y,this.data.scale,this.data.scale),stage.update()}else this.data.text&&(this.shape.text=this.data.text,stage.update())}},{key:"calculateSize",value:function(){var t=this;return this.imageEl=new Image,this.imageEl.src=this.data.image,new Promise(function(e){t.imageEl.onload=function(a){var n=t.data._orig.width=t.imageEl.width,i=t.data._orig.height=t.imageEl.height,r=t.data._container.width=t.shape.getBounds()?t.shape.getBounds().width:t.shape.nominalBounds.width,o=t.data._container.height=t.shape.getBounds()?t.shape.getBounds().height:t.shape.nominalBounds.height,u=t.data.scale=n>i?100/n*r/100:100/i*o/100;t.data.width=n*u,t.data.height=i*u,e(u)}})}},{key:"calculatePos",value:function(){var t=this;return new Promise(function(e){t.data.pos.x="center"===t.data.align.x?(t.data._container.width-t.data.width)/2:"right"===t.data.align.x?t.data._container.width-t.data.width:0,t.data.pos.y="center"===t.data.align.y?(t.data._container.height-t.data.height)/2:"bottom"===t.data.align.y?t.data._container.height-t.data.height:0,e()})}},{key:"clicked",value:function(){this.data.link&&(window.location=this.data.link),this.data.onClick&&this.data.onClick.apply(this,this.data)}},{key:"_defaultData",get:function(){return{align:{x:"center",y:"center"},_orig:{width:0,height:0},_container:{width:0,height:0},scale:1,width:0,height:0,pos:{x:0,y:0}}}}]),t}();a["default"]=r},{}],3:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=t("./layer"),u=n(o),s=function(){function t(){var e=this;i(this,t),this.layers=[];var a=window.init;window.init=function(){a(),e.stage=stage,e.bindEvents(),window.pmAnimatedBannersConfig&&pmAnimatedBannersConfig(e)}}return r(t,[{key:"bindEvents",value:function(){var t=this;this.stage.on("click",function(e){var a=t.layers.filter(function(a){return t.stage.getObjectsUnderPoint(e.stageX,e.stageY,0).indexOf(a.shape)>-1});a.forEach(function(t){return t.clicked()})})}},{key:"map",value:function(t){var e=stage.children[t.reference]||stage.children[0][t.reference];e&&this.layers.push(new u["default"](t,e))}}]),t}();a["default"]=s},{"./layer":2}]},{},[1]);