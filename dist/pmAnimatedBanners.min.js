!function t(e,a,n){function i(o,s){if(!a[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[o]={exports:{}};e[o][0].call(d.exports,function(t){var a=e[o][1][t];return i(a?a:t)},d,d.exports,t,e,a,n)}return a[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(a,"__esModule",{value:!0});var i=t("./loader"),r=n(i);a["default"]=new r["default"]},{"./loader":3}],2:[function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=function(){function t(e,a){var i=this;n(this,t);var r=Object.assign(this._defaultData,e);Object.assign(this,{shape:a,data:r}),this.calculate().then(function(){return i.render()})}return i(t,[{key:"calculate",value:function(){var t=this;return new Promise(function(e){t.data.image?t.calculateSize().then(function(){return t.calculatePos().then(e)}):e()})}},{key:"render",value:function(){if(this.data.image){var t=this.shape.addChild(new createjs.Bitmap(this.imageEl));t.setTransform(this.data.pos.x,this.data.pos.y,this.data.scale,this.data.scale)}else this.data.text&&(this.shape.text=this.data.text);stage.update()}},{key:"calculateSize",value:function(){var t=this;return this.imageEl=new Image,this.imageEl.src=this.data.image,new Promise(function(e){t.imageEl.onload=function(){var a=t.data._orig.width=t.imageEl.width,n=t.data._orig.height=t.imageEl.height,i=t.shape.getBounds(),r=t.data._container,o=r.width=i?i.width:t.shape.nominalBounds.width,s=r.height=i?i.height:t.shape.nominalBounds.height,u=t.data.scale=a>n?100/a*o/100:100/n*s/100;t.data.width=a*u,t.data.height=n*u,e(u)}})}},{key:"calculatePos",value:function(){var t=this;return new Promise(function(e){"center"===t.data.align.x?t.data.pos.x=(t.data._container.width-t.data.width)/2:"right"===t.data.align.x?t.data.pos.x=t.data._container.width-t.data.width:t.data.pos.x=0,"center"===t.data.align.y?t.data.pos.y=(t.data._container.height-t.data.height)/2:"bottom"===t.data.align.y?t.data.pos.y=t.data._container.height-t.data.height:t.data.pos.y=0,e()})}},{key:"clicked",value:function(){sendCampaignInstanceTrackingEvent&&sendCampaignInstanceTrackingEvent("animatedBannerClick"),this.data.onClick&&this.data.onClick.apply(this,this.data),this.data.link&&(window.location=this.data.link)}},{key:"_defaultData",get:function(){return{align:{x:"center",y:"center"},scale:1,width:0,height:0,pos:{x:0,y:0},_orig:{width:0,height:0},_container:{width:0,height:0}}}}]),t}();a["default"]=r},{}],3:[function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=t("./layer"),s=n(o),u=function(){function t(){var e=this;i(this,t),this.layers=[];var a=window.init;window.init=function(){a(),e.stage=stage,e.bindEvents(),window.pmAnimatedBannersConfig&&pmAnimatedBannersConfig(e)}}return r(t,[{key:"bindEvents",value:function(){var t=this;this.stage.on("click",function(e){var a=t.layers.filter(function(a){return t.stage.getObjectsUnderPoint(e.stageX,e.stageY,0).indexOf(a.shape)>-1});a.forEach(function(t){return t.clicked()})})}},{key:"map",value:function(t){var e=stage.children[t.reference]||stage.children[0][t.reference];e&&this.layers.push(new s["default"](t,e))}}]),t}();a["default"]=u},{"./layer":2}]},{},[1]);