!function e(t,a,n){function i(s,o){if(!a[s]){if(!t[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=a[s]={exports:{}};t[s][0].call(u.exports,function(e){var a=t[s][1][e];return i(a?a:e)},u,u.exports,e,t,a,n)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var i=e("./util"),r=n(i);a["default"]=function(){!function(e){var t="\n      canvas#canvas {\n        cursor: default !important;\n      }\n      canvas#canvas.has-pointer {\n        cursor: pointer !important;\n      }\n    ",a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),e.appendChild(a)}(document.head||document.getElementsByTagName("head")[0]);var e=void 0;return{set:function(t){e=t,"undefined"!=typeof stage&&"pointer"===e?r["default"].addClass(stage.canvas,"has-pointer"):"undefined"!=typeof stage&&r["default"].removeClass(stage.canvas,"has-pointer")},get:function(){return e}}}()},{"./util":6}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=window.getPmData=function(e,t){if(!window.templateData)throw Error("unable to access api");window.pmDataCache={};var a=void 0;return"image"===e?a=templateData.getImageByName(t):"text"===e?a=templateData.getTextByName(t):"colour"===e||"color"===e?a=templateData.getColoursByName(t):"link"===e&&(a=templateData.getLinkByName(t)),window.pmDataCache[e]||(window.pmDataCache[e]={}),window.pmDataCache[e][t]=a,a}},{}],3:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./loader"),r=n(i);e("./data");var s=setInterval(function(){if(stage){new r["default"];clearInterval(s)}},1)},{"./data":2,"./loader":5}],4:[function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(){function e(t,a){var i=this;n(this,e);var r=Object.assign(this._defaultData,t);Object.assign(this,{shape:a,data:r}),this.calculate().then(function(){return i.render()})}return i(e,[{key:"calculate",value:function(){var e=this;return new Promise(function(t){e.data.image?e.calculateSize().then(function(){return e.calculatePos().then(t)}):t()})}},{key:"render",value:function(){if(this.data.image){var e=this.shape.addChild(new createjs.Bitmap(this.imageEl));e.setTransform(this.data.pos.x,this.data.pos.y,this.data.scale,this.data.scale)}else this.data.text&&(this.shape.text=this.data.text);stage.update()}},{key:"calculateSize",value:function(){var e=this;return this.imageEl=new Image,this.imageEl.src=this.data.image,new Promise(function(t){e.imageEl.onload=function(){var a=e.data._orig.width=e.imageEl.width,n=e.data._orig.height=e.imageEl.height,i=e.shape.getBounds(),r=e.data._container,s=r.width=i?i.width:e.shape.nominalBounds.width,o=r.height=i?i.height:e.shape.nominalBounds.height,c=void 0;s>=o&&a>=n?e.data.scale=c=100/a*s/100:s<o&&a<n?e.data.scale=c=100/n*o/100:a>=n?e.data.scale=c=100/n*o/100:e.data.scale=c=100/a*s/100,e.data.width=a*c,e.data.height=n*c,t(c)}})}},{key:"calculatePos",value:function(){var e=this;return new Promise(function(t){"center"===e.data.align.x?e.data.pos.x=(e.data._container.width-e.data.width)/2:"right"===e.data.align.x?e.data.pos.x=e.data._container.width-e.data.width:e.data.pos.x=0,"center"===e.data.align.y?e.data.pos.y=(e.data._container.height-e.data.height)/2:"bottom"===e.data.align.y?e.data.pos.y=e.data._container.height-e.data.height:e.data.pos.y=0,t()})}},{key:"clicked",value:function(){window.sendCampaignInstanceTrackingEvent&&sendCampaignInstanceTrackingEvent("animatedBannerClick"),this.data.onClick&&this.data.onClick.apply(this,this.data),this.data.link&&(window.location=this.data.link)}},{key:"_defaultData",get:function(){return{align:{x:"center",y:"center"},scale:1,width:0,height:0,pos:{x:0,y:0},_orig:{width:0,height:0},_container:{width:0,height:0}}}}]),e}();a["default"]=r},{}],5:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=e("./layer"),o=n(s),c=e("./cursor"),l=n(c),u=e("./util"),d=n(u),h=function(){function e(){i(this,e),this.layers=[],stage&&(stage.enableMouseOver(),stage.useHandCursor=!1,this.bindEvents()),window.stopMilliseconds&&this.setPauseTimeout(),window.pmAnimatedBannersConfig&&pmAnimatedBannersConfig(this)}return r(e,[{key:"bindEvents",value:function(){var e=this;stage.on("stagemousemove",function(t){var a=e.layers.filter(function(e){return stage.getObjectsUnderPoint(t.stageX,t.stageY,0).indexOf(e.shape)>-1});a.forEach(function(e){(e.data.link||e.data.onClick)&&l["default"].set("pointer")}),0===a.length&&l["default"].set("default")}),stage.on("click",function(t){var a=e.layers.filter(function(e){return stage.getObjectsUnderPoint(t.stageX,t.stageY,0).indexOf(e.shape)>-1});a.forEach(function(e){return e.clicked()})})}},{key:"setPauseTimeout",value:function(){this.timeout=setTimeout(function(){if(stage&&stage.children)for(var e=0;e<stage.children.length;e++)"stop"in stage.children[e]&&stage.children[e].stop()},window.stopMilliseconds)}},{key:"map",value:function(e){var t=d["default"].searchAnimateChildren(stage,e.reference);if("stage"===e.reference){var a=new o["default"](e,stage);stage.on("click",a.clicked.bind(a))}else t&&this.layers.push(new o["default"](e,t))}}]),e}();a["default"]=h},{"./cursor":1,"./layer":4,"./util":6}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={hasClass:function i(e,t){var i=void 0;return i=e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?e.classList.add(t):(void 0).hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.classList?e.classList.remove(t):(void 0).hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "))},searchAnimateChildren:function(e,t){var a=void 0;if(e.children)for(var i in e.children){if(e.children[i][t]){a=e.children[i][t];break}if(e.children[i].children&&0!==e.children[i].children.length){var r=n.searchAnimateChildren(e.children[i],t);if(r){a=r;break}}}return a}};a["default"]=n},{}]},{},[3]);